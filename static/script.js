"use strict";var socket=io(),results=document.querySelector("#results"),openTimes=document.querySelector("#open_times"),openFilters=document.querySelector("#open_filters"),filters=document.querySelector("#filters"),times=document.querySelector("#times"),rangeInput=document.querySelector('input[type="range"]'),numberInput=document.querySelector('input[type="number"]'),sortInputsAvailability=document.querySelectorAll('#filters div:first-of-type input[type="radio"]'),sortInputs=document.querySelectorAll('#filters div:nth-of-type(2) input[type="radio"]'),errorMessage=document.querySelector("#error_message"),chargingStations=document.querySelector("#charging_stations"),loaderSection=document.querySelector("#loader"),loaderText=document.querySelector("#loader_text");
"use strict";var getLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition,showError):(errorMessage.classList.remove("hidden"),errorMessage.textContent="Your browser does not let you share your location. Maybe try in another browser.")},showPosition=function(o){var t=o.coords.latitude,o=o.coords.longitude;socket.emit("location",{latitude:t,longitude:o})},showError=function(o){o.PERMISSION_DENIED&&(errorMessage.classList.remove("hidden"),errorMessage.textContent="It seems that we don't have access to your location. Check your settings to enable us to track your location.")};
"use strict";function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var resultsAmount=0,changeSupplierOnAvailibitlySort=(socket.on("fill-in-data",function(e,n){chargingStations.classList.remove("hidden"),loaderSection.classList.add("hidden"),loaderText.classList.add("hidden");var i=changeSupplierOnAvailibitlySort(e),a=changeDistanceOnAvailibitlySort(n);sortInputsAvailability.forEach(function(t){t.addEventListener("click",function(){chargingStations.textContent="",i=changeSupplierOnAvailibitlySort(e),a=changeDistanceOnAvailibitlySort(n),sortInputs[0].checked?fillInChargingStationsBySupplier(i):sortInputs[1].checked&&fillInChargingStationsByDistance(a,i),results.textContent=resultsAmount+" results"})}),sortInputs.forEach(function(t){t.addEventListener("click",function(t){chargingStations.textContent="";t=t.target.id;"sustainability"==t?fillInChargingStationsBySupplier(i):"distance"==t&&fillInChargingStationsByDistance(a,i)})}),rangeInput.addEventListener("input",function(){chargingStations.textContent="",sortInputs[0].checked?fillInChargingStationsBySupplier(i):sortInputs[1].checked&&fillInChargingStationsByDistance(a,i),results.textContent=resultsAmount+" results"}),fillInChargingStationsBySupplier(i),results.textContent=resultsAmount+" results"}),function(t){var n=[];return t.map(function(e){return Object.keys(e).map(function(t){n.push(_defineProperty({},t,{value:e[t].value,stations:e[t].stations.filter(function(t){return sortInputsAvailability[0].checked?"Available"===t.status:sortInputsAvailability[1].checked?t:void 0})}))})}),n}),changeDistanceOnAvailibitlySort=function(t){var n=[];return t.map(function(e){return Object.keys(e).filter(function(t){(sortInputsAvailability[0].checked&&"Available"===e[t].stations.status||sortInputsAvailability[1].checked)&&n.push(_defineProperty({},t,{value:e[t].value,stations:e[t].stations}))})}),n},fillInChargingStationsByDistance=function(t,e){resultsAmount=0;var n=[],i=[],a=(e.map(function(t){Object.values(t).map(function(t){n.push(t.value*t.stations.length),i.push(t.stations.length)})}),n.reduce(function(t,e){return t+e},0)/i.reduce(function(t,e){return t+e},0));t.map(function(t){Object.values(t).map(function(t){var e=document.createElement("p"),n=t.value;e.textContent="Sustainability score: ",a<n?e.classList.add("bad_sustainability"):n<=a&&e.classList.add("good_sustainability"),insertContent(t.stations,e)})})},fillInChargingStationsBySupplier=function(t){resultsAmount=0;var e=[],n=[],s=(Object.values(t).map(function(t){Object.values(t).map(function(t){e.push(t.value*t.stations.length),n.push(t.stations.length)})}),e.reduce(function(t,e){return t+e},0)/n.reduce(function(t,e){return t+e},0));return t.map(function(a){return Object.keys(a).map(function(i){return a[i].stations.map(function(t){var e=document.createElement("p"),n=(e.textContent="Sustainability score: ",a[i].value);s<n?e.classList.add("bad_sustainability"):n<=s&&e.classList.add("good_sustainability"),insertContent(t,e)})})})},insertContent=function(t,e){var n,i,a,s,r,o,u,c,l,d,p,g,f;if(t.distance<rangeInput.value)return resultsAmount++,n=t.coordinates.latitude,i=t.coordinates.longitude,a=document.createElement("article"),s=document.createElement("h2"),r=document.createElement("p"),o=document.createElement("button"),u=document.createElement("div"),c=document.createElement("p"),l=document.createElement("p"),d=document.createElement("p"),p=document.createElement("p"),g=document.createElement("a"),f=t.address.map(function(t){if(t.id.includes("address"))return t.text}).filter(function(t){return t}),"Available"!==t.status&&a.classList.add("unavailable"),s.textContent=f[0],r.textContent=t.distance+" meters",o.textContent="i",u.setAttribute("id","extra_info_container"),u.classList.add("hidden"),c.textContent="Operator: "+t.operatorName,l.textContent="Provider: "+t.provider,d.textContent="Current status: "+t.status,p.textContent="Maximum charging power: "+t.maxPower+"kW",g.setAttribute("href","http://www.google.com/maps/place/"+n+","+i),g.setAttribute("target","_blank"),g.textContent="Start route",a.addEventListener("click",function(t){var e;window.innerHeight-t.clientY<250&&u.classList.contains("hidden")&&(e="article"!==(e=t.target).nodeName.toLowerCase()?t.target.parentElement:e).scrollIntoView({behavior:"smooth",block:"center"}),"a"!==t.target.tagName.toLowerCase()&&u.classList.toggle("hidden")}),0<f.length&&(u.append(c,l,d,p,g),a.append(s,r,e,o,u),chargingStations.appendChild(a)),chargingStations};
"use strict";var addEventListeners=function(){openFilters.addEventListener("click",function(){openFilters.classList.toggle("active"),filters.classList.toggle("hidden"),openFilters.classList.contains("active")&&(openTimes.classList.remove("active"),times.classList.add("hidden"))}),openTimes.addEventListener("click",function(){openTimes.classList.toggle("active"),times.classList.toggle("hidden"),openTimes.classList.contains("active")&&(openFilters.classList.remove("active"),filters.classList.add("hidden"))}),rangeInput.addEventListener("input",function(e){var e=e.target,s=(numberInput.value=e.value,e.min),t=e.max,i=e.value,i=(e.style.backgroundSize=100*(i-s)/(t-s)+"% 100%",Number(e.style.backgroundSize.split("%")[0])/50);0===i?i=1:.4===i?i=1.2:.8===i?i=1.4:1.2===i?i=1.6:1.6===i?i=1.8:2===i&&(i=2),rangeInput.style.setProperty("--slider-size",i+"rem")})};
"use strict";"/search"==window.location.pathname&&(getLocation(),addEventListeners());